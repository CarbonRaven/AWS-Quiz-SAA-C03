{
  "id": 382,
  "topic": "Topic 1",
  "question": "An image-processing company has a web application that users use to upload images. The application uploads the images into an Amazon S3 bucket. The company has set up S3 event notifications to publish the object creation events to an Amazon Simple Queue Service (Amazon SQS) standard queue. The SQS queue serves as the event source for an AWS Lambda function that processes the images and sends the results to users through email.\n\nUsers report that they are receiving multiple email messages for every image uploaded. A solutions architect needs to resolve this issue.\n\nWhich solution will meet this requirement with the LEAST operational overhead?",
  "options": {
    "A": "Set up long polling in the SQS queue by increasing the ReceiveMessage wait time to 30 seconds.",
    "B": "Change the SQS standard queue to an SQS FIFO queue. Use the message deduplication ID to discard duplicate messages.",
    "C": "Increase the visibility timeout in the SQS queue to a value that is greater than the total of the function timeout and the batch window timeout.",
    "D": "Modify the Lambda function to delete each message from the SQS queue immediately after the message is read before processing."
  },
  "correct_answer": "C",
  "explanation": "Multiple emails indicate the Lambda function is processing the same message multiple times due to visibility timeout expiring before processing completes. Increasing visibility timeout beyond the total processing time prevents the message from becoming visible again while still being processed. Long polling doesn't prevent duplicate processing. FIFO queues add complexity. Deleting before processing risks data loss if processing fails."
}
